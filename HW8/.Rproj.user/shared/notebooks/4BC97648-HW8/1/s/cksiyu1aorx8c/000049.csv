"0",""
"0","# The plot shows that shelf location is the best predictor of sales, which makes sense when thinking about how people shop."
"0",""
"0","p1 <- predict(m1, data <- testdata)"
"0",""
"0","m1MSE <- getMSE(data$Sales, p1)"
"0",""
"0","m1MSE"
"1","[1]"
"1"," 4.805864"
"1","
"
"0","# C.) "
"0",""
"0","# 5 Fold Cross validation is used "
"0","ctrl <- trainControl(method = ""cv"", number = 5) "
"0",""
"0",""
"0","m2 <- train(Sales ~ ., data <- traindata, method = ""rpart"", trControl = ctrl)"
"2","Warning in nominalTrainWorkflow(x = x, y = y, wts = weights, info = trainInfo,  :"
"2","
 "
"2"," There were missing values in resampled performance measures.
"
"0","p2 <- predict(m2, data <- testdata)"
"0",""
"0","m2MSE <- getMSE(testdata$Sales, p2)"
"0",""
"0","m2MSE"
"1","[1]"
"1"," 5.648047"
"1","
"
"0","# Cross vlaidation tree test error is higher then regualr, which seems quite weird to me. "
"0",""
"0",""
"0","# D.) "
"0",""
"0","ctrl <- trainControl(method = ""cv"", number = 5)"
"0",""
"0",""
"0","m3 <- train(Sales ~ ., data = traindata, method = ""rf"", trControl = ctrl, importance = TRUE)"
"0",""
"0","p3 <- predict(m3, newdata <- testdata)"
"0",""
"0",""
"0","m3MSE <- getMSE(testdata$Sales, p3)"
"0",""
"0","m3MSE"
"1","[1]"
"1"," 2.974038"
"1","
"
"0","# m3MSE error = 2.974038"
"0",""
"0",""
"0","importance_var <- importance(m3$finalModel)"
"0",""
"0",""
"0","importance_var"
"1","               "
"1","    %IncMSE"
"1"," IncNodePurity"
"1","
CompPrice      "
"1"," 15.9129418"
"1","    142.569881"
"1","
Income         "
"1","  3.4136793"
"1","     92.919818"
"1","
Advertising    "
"1","  6.6554525"
"1","     74.187720"
"1","
Population     "
"1","  0.6579445"
"1","     77.359285"
"1","
Price          "
"1"," 42.0831632"
"1","    394.709779"
"1","
ShelveLocGood  "
"1"," 59.8928255"
"1","    550.741251"
"1","
ShelveLocMedium"
"1"," 21.8453838"
"1","     80.241935"
"1","
Age            "
"1"," 20.0932700"
"1","    188.373458"
"1","
Education      "
"1","  1.9271461"
"1","     50.356846"
"1","
UrbanYes       "
"1"," -0.7931541"
"1","      8.574258"
"1","
USYes          "
"1","  3.5380617"
"1","     12.818894"
"1","
"
"0","# E.) "
"0",""
"0","ctrl <- trainControl(method = ""cv"", number = 5)"
"0",""
"0",""
"0","m4 <- train(Sales ~ ., data = traindata, method = ""rf"",  trControl = ctrl, importance = TRUE)"
"0",""
"0",""
"0","p4 <- predict(m4, newdata = testdata)"
"0",""
"0",""
"0",""
"0",""
"0","m4MSE <- getMSE(testdata$Sales, p4)"
"0",""
"0","m4MSE"
"1","[1]"
"1"," 2.922013"
"1","
"
"0","important_var_m4 <- importance(m4$finalModel)"
"0",""
"0","important_var_m4"
"1","               "
"1","    %IncMSE"
"1"," IncNodePurity"
"1","
CompPrice      "
"1"," 17.1122471"
"1","     148.57476"
"1","
Income         "
"1","  3.8375811"
"1","      86.89012"
"1","
Advertising    "
"1","  8.1837709"
"1","      77.92788"
"1","
Population     "
"1","  0.4538502"
"1","      75.54795"
"1","
Price          "
"1"," 41.6783667"
"1","     399.37937"
"1","
ShelveLocGood  "
"1"," 56.5898546"
"1","     554.05667"
"1","
ShelveLocMedium"
"1"," 20.9648880"
"1","      79.25323"
"1","
Age            "
"1"," 20.2424348"
"1","     192.09721"
"1","
Education      "
"1"," -0.1720823"
"1","      48.75296"
"1","
UrbanYes       "
"1"," -1.9802406"
"1","       7.89007"
"1","
USYes          "
"1","  4.0967975"
"1","      11.43385"
"1","
"
"0","# Random Forest had the lowest MSE so far "
"0",""
"0",""
"0","# F.) "
"0",""
"0","# Bart Model"
"0",""
"0","m5 <- bart2(Sales ~ ., data = traindata, n.samples = 50, keepTrees = TRUE)"
"1","
Running BART with numeric y

"
"1","number of trees: 75
"
"1","number of chains: 4, number of threads 4
"
"1","tree thinning rate: 1
"
"1","Prior:
"
"1","	k prior fixed to 2.000000
"
"1","	degrees of freedom in sigma prior: 3.000000
"
"1","	quantile in sigma prior: 0.900000
"
"1","	scale in sigma prior: 0.000813
"
"1","	power and base for tree prior: 2.000000 0.950000
"
"1","	use quantiles for rule cut points: false
"
"1","	proposal probabilities: birth/death 0.50, swap 0.10, change 0.40; birth 0.50
"
"1","data:
"
"1","	number of training observations: 200
"
"1","	number of test observations: 0
"
"1","	number of explanatory variables: 12
"
"1","	init sigma: 1.016678, curr sigma: 1.016678
"
"1","
"
"1","Cutoff rules c in x<=c vs x>c
"
"1","Number of cutoffs: (var: number of possible c):
"
"1","(1: 100) "
"1","(2: 100) "
"1","(3: 100) "
"1","(4: 100) "
"1","(5: 100) "
"1","
"
"1","(6: 100) "
"1","(7: 100) "
"1","(8: 100) "
"1","(9: 100) "
"1","(10: 100) "
"1","
"
"1","(11: 100) "
"1","(12: 100) "
"1","
"
"1","Running mcmc loop:
"
"1","total seconds in loop: 0.107471
"
"1","
Tree sizes, last iteration:
"
"1","[1] "
"1","1 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","4 "
"1","4 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","3 "
"1","1 "
"1","3 "
"1","
"
"1","3 "
"1","5 "
"1","3 "
"1","3 "
"1","3 "
"1","1 "
"1","2 "
"1","2 "
"1","4 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","1 "
"1","4 "
"1","
"
"1","4 "
"1","2 "
"1","2 "
"1","1 "
"1","3 "
"1","5 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","
"
"1","3 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","
"
"1","[2] "
"1","3 "
"1","1 "
"1","2 "
"1","4 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","4 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","
"
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","3 "
"1","3 "
"1","3 "
"1","2 "
"1","4 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","4 "
"1","
"
"1","3 "
"1","2 "
"1","4 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","1 "
"1","2 "
"1","3 "
"1","2 "
"1","5 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","
"
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","2 "
"1","4 "
"1","2 "
"1","2 "
"1","2 "
"1","5 "
"1","3 "
"1","3 "
"1","2 "
"1","4 "
"1","2 "
"1","4 "
"1","2 "
"1","
"
"1","[3] "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","4 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","5 "
"1","3 "
"1","3 "
"1","2 "
"1","
"
"1","3 "
"1","4 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","3 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","4 "
"1","
"
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","3 "
"1","4 "
"1","1 "
"1","3 "
"1","2 "
"1","2 "
"1","4 "
"1","5 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","
"
"1","4 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","4 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","3 "
"1","3 "
"1","
"
"1","[4] "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","3 "
"1","2 "
"1","4 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","
"
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","1 "
"1","4 "
"1","3 "
"1","4 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","2 "
"1","
"
"1","2 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","2 "
"1","3 "
"1","2 "
"1","2 "
"1","3 "
"1","3 "
"1","2 "
"1","1 "
"1","3 "
"1","2 "
"1","4 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","
"
"1","3 "
"1","2 "
"1","1 "
"1","2 "
"1","2 "
"1","2 "
"1","3 "
"1","3 "
"1","2 "
"1","4 "
"1","2 "
"1","4 "
"1","2 "
"1","1 "
"1","3 "
"1","3 "
"1","2 "
"1","
"
"1","
"
"1","Variable Usage, last iteration (var:count):
"
"1","(1: 46) "
"1","(2: 29) "
"1","(3: 35) "
"1","(4: 30) "
"1","(5: 69) "
"1","
"
"1","(6: 40) "
"1","(7: 35) "
"1","(8: 22) "
"1","(9: 31) "
"1","(10: 29) "
"1","
"
"1","(11: 31) "
"1","(12: 38) "
"1","
DONE BART

"
"0","p5 <- predict(m5, newdata = testdata)"
"0",""
"0",""
"0","m5MSE <- mean((testdata$Sales - p5_mean)^2)"
"2","Warning in testdata$Sales - p5_mean :"
"2","
 "
"2"," longer object length is not a multiple of shorter object length
"
"0","m5MSE"
"1","[1]"
"1"," 7.287165"
"1","
"
"0","# Error is higest in BART model"
"0",""
"0",""
